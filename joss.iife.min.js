// Copyright (c) 2021 Tee Teik Wynn
// 
// Permission is hereby granted, free of charge, to any person obtaining a copy
// of this software and associated documentation files (the "Software"), to deal
// in the Software without restriction, including without limitation the rights
// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
// copies of the Software, and to permit persons to whom the Software is
// furnished to do so, subject to the following conditions:
// 
// 
// The above copyright notice and this permission notice shall be included in all
// copies or substantial portions of the Software.
// 
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
// SOFTWARE.
// 
const JOSS=function(){"use strict";const e=function(){const e=new ArrayBuffer(2);new Uint16Array(e)[0]=65279;return 254===new Uint8Array(e)[0]?"BE":"LE"}(),t={Object:c,Array:c,Map:c,Set:c,DataView:l,Int8Array:l,Uint8Array:l,Uint8ClampedArray:l,Int16Array:l,Uint16Array:l,Int32Array:l,Uint32Array:l,Float32Array:l,Float64Array:l,BigInt64Array:l,BigUint64Array:l,Date:function(e,t){A(e,Uint8Array.of(14)),o(e,t.valueOf())},RegExp:function(e,t){A(e,Uint8Array.of(15)),o(e,t.toString())},ArrayBuffer:f,SharedArrayBuffer:f,Boolean:a,Number:s,BigInt:i,String:f},r={hole:new Error("Encountered a hole in a sparse array"),ended:new Error("The serialized bytestream ended before the deserialization could complete successfully."),unused:new Error("The deserialization completed before the end of the serialized bytestream."),exceeded:new Error("The serialized bytestream exceeded the maximum acceptable length."),malformed:new Error("The serialized bytestream contained malformed byte sequences."),property:new Error("Encountered an undefined property of a collection."),collection:new Error("Encountered a collection in streaming mode.")};return r.ended.name="ERR_ENDED",r.unused.name="ERR_UNUSED",r.exceeded.name="ERR_EXCEEDED",r.malformed.name="ERR_MALFORMED",void 0===Function.prototype.name&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function(?:\s|\s*\/\*.*\*\/\s*)+([^\(\s\/]*)\s*/)[1]}}),Uint8Array.of=Uint8Array.of||function(){const e=new this(arguments.length);return e.set(Array.prototype.slice.call(arguments)),e},Uint8Array.from=Uint8Array.from||function(){const e=new this(arguments[0].length);return e.set(arguments[0]),e},Uint8Array.prototype.forEach=Uint8Array.prototype.forEach||Array.prototype.forEach,{serialize:function(t,r){const a={};if(void 0===r)r={};else if("object"!=typeof r)throw new TypeError("The options parameter must be an object.");if(!1===r.hasOwnProperty("endian"))a.endian=e;else{if("LE"!==r.endian&&"BE"!==r.endian)throw new RangeError('The endian option must be either "LE" or "BE".');a.endian=r.endian}return a.bytes=[],a.length=0,a.record=new Map,a.method="static",n(a),o(a,t),v(a.bytes,a.length)},deserialize:function(e){if("object"!=typeof e||"Uint8Array"!==e.constructor.name)throw new TypeError("The bytes parameter must be a Uint8Array.");const t={};t.map=new Map,t.bytes=e,t.cursor=0,t.offset=0,t.method="static",b(t);const n=p(t);if(t.cursor!==t.bytes.length)throw r.unused;return n},serializable:function(t,a){const s={};if(void 0===a)a={};else if("object"!=typeof a)throw new TypeError("The options parameter must be an object.");if(!1===a.hasOwnProperty("endian"))s.endian=e;else{if("LE"!==a.endian&&"BE"!==a.endian)throw new RangeError('The endian option must be either "LE" or "BE".');s.endian=a.endian}s.length=0,s.record=new Map,s.method="stream";const i=[],f=[],c=[],l=Symbol(),u=Symbol(),h=Symbol();return new ReadableStream({start:function(e){i.push(0),f.push({root:t}),c.push(d(f[0]))},pull:function(e){const t=f.length-1;if(t>=0){s.bytes=[];const a=i[t],b=f[t],p=c[t].next();if(void 0===s.version&&n(s),0===a){let e;e=128;const r=b.constructor.name;if("Array"===r){const t=y(b.length);if(b.hasOwnProperty(u)){e=160;const r=y(b[u]);A(s,Uint8Array.of(0|e|t.length-1<<2|r.length-1)),A(s,t),A(s,r)}else if(b.hasOwnProperty(h)){e=160;const r=y(b[h]);A(s,Uint8Array.of(16|e|t.length-1<<2|r.length-1)),A(s,t),A(s,r)}else{y(b.length);A(s,Uint8Array.of(e|t.length-1)),A(s,t)}}else if("Object"===r&&0!==t){const t=y(b[l]);A(s,Uint8Array.of(8|e|t.length-1)),A(s,t)}else if("Map"===r){const t=y(b.size);A(s,Uint8Array.of(16|e|t.length-1)),A(s,t)}else if("Set"===r){const t=y(b.size);A(s,Uint8Array.of(24|e|t.length-1)),A(s,t)}}if(!1===p.done){if(2!==a){const e=p.value,n=b.constructor.name;if("Array"===n&&b.hasOwnProperty(h))o(s,e);else if("Object"===n&&0!==t)o(s,e);else if("Map"===n)try{o(s,e)}catch(t){if(t!==r.collection)throw t;i.push(0),f.push(e),c.push(d(e))}i[t]=2}else if(2===a){const e=p.value;if(e!==r.hole)try{o(s,e)}catch(t){if(t!==r.collection)throw t;i.push(0),f.push(e),c.push(d(e))}else b.hasOwnProperty(u)&&A(s,Uint8Array.of(12));i[t]=1}}else delete b[h],delete b[u],delete b[l],i.pop(),f.pop(),c.pop();0!==s.bytes.length?e.enqueue(v(s.bytes)):this.pull(e)}else e.close()}});function d(e){let t,n,o,a;n="key";const s=e.constructor.name;if("Array"===s){a=e.keys();const t=U(e);void 0!==t.nslot?Object.defineProperty(e,u,{configurable:!0,value:t.nslot}):void 0!==t.nelement&&Object.defineProperty(e,h,{configurable:!0,value:t.nelement})}else"Object"===s?(a=Object.keys(e),Object.defineProperty(e,l,{configurable:!0,value:a.length}),o=-1):"Map"!==s&&"Set"!==s||(a=e.keys());return{next:function(){if("key"===n){if(n="value",void 0===o){let r=a.next();if(e.hasOwnProperty(h))for(;!1===e.hasOwnProperty(r.value)&&!1===r.done;)r=a.next();return!1===r.done?(t=r.value,e.hasOwnProperty(u)&&t>=e[u]?{value:void 0,done:!0}:{value:t,done:!1}):{value:void 0,done:!0}}return o+=1,void 0!==a[o]?(t=a[o],{value:t,done:!1}):{value:void 0,done:!0}}if(n="key","Array"===s)return e.hasOwnProperty(t)?{value:e[t],done:!1}:{value:r.hole,done:!1};if("Object"===s)return{value:e[t],done:!1};if("Map"===s)return{value:e.get(t),done:!1};if("Set"===s)return{value:t,done:!1}}}}},deserializable:function(e){let t;if(void 0===e)e={};else if("object"!=typeof e)throw new TypeError("The options parameter must be an object.");if(!1===e.hasOwnProperty("maxlength"))t=1073741824;else{if(!("number"==typeof e.maxlength&&e.maxlength>0))throw new RangeError("The maxlength option must be a positive integer.");t=e.maxlength}const r=g(t),n=new WritableStream(r);return r.stream=n,n},deserializing:function(e,t){let r;if(void 0===t)t={};else if("object"!=typeof t)throw new TypeError("The options parameter must be an object.");if(!1===t.hasOwnProperty("maxlength"))r=1073741824;else{if(!("number"==typeof t.maxlength&&t.maxlength>0))throw new RangeError("The maxlength option must be a positive integer.");r=t.maxlength}if("object"==typeof e){if(void 0!==e[Symbol.asyncIterator]){const t=e[Symbol.asyncIterator](),n=g(r);return n.start(),new Promise((function(e,r){t.next().then((function o(a){!1===a.done?(n.write(a.value),t.next().then(o).catch(r)):e(n.close())})).catch(r)}))}if("ReadableStream"===e.constructor.name){const t=e.getReader(),n=g(r);return n.start(),new Promise((function(e,r){t.read().then((function o(a){!1===a.done?(n.write(a.value),t.read().then(o).catch(r)):e(n.close())})).catch(r)}))}throw new TypeError("The readable parameter must be a readable stream or async iterable.")}throw new TypeError("The readable parameter must be a readable stream or async iterable.")}};function n(e){e.version=1,A(e,Uint8Array.of(1))}function o(e,r){switch(typeof r){case"object":if(null!==r){const n=r.constructor.name,o=t[n];return void 0!==o?!1===e.record.has(r)?(e.record.set(r,e.length),o(e,r,n)):u(e,r):A(e,Uint8Array.of(13))}return A(e,Uint8Array.of(0));case"undefined":return A(e,Uint8Array.of(1));case"boolean":return a(e,r);case"number":return s(e,r);case"bigint":return i(e,r);case"string":return f(e,r);default:A(e,Uint8Array.of(13))}}function a(e,t,r){void 0===r?A(e,!0===t?Uint8Array.of(2):Uint8Array.of(4)):!0===t.valueOf()?A(e,Uint8Array.of(3)):A(e,Uint8Array.of(5))}function s(e,t,r){let n,o,a;if(n=32,void 0===r){if(a=t,!isFinite(a))return A(e,a===1/0?Uint8Array.of(6):a===-1/0?Uint8Array.of(8):Uint8Array.of(10))}else{if(a=t.valueOf(),!isFinite(a))return A(e,a===1/0?Uint8Array.of(7):a===-1/0?Uint8Array.of(9):Uint8Array.of(11));n|=16}Math.floor(a)===a&&Math.abs(a)<=Number.MAX_SAFE_INTEGER?((a<0||0===a&&1/a==-1/0)&&(n|=8),o=y(Math.abs(a))):(o=new Uint8Array(new ArrayBuffer(8)),new DataView(o.buffer,o.byteOffset,o.byteOffset+o.length).setFloat64(0,a,!0)),A(e,Uint8Array.of(n|o.length-1)),A(e,o)}function i(e,t,r){let n,o,a;n=64,void 0===r?a=t:(a=t.valueOf(),n|=16),a>=0?o=h(a):(n|=8,o=h(-a));const s=y(o.length);A(e,Uint8Array.of(n|s.length-1)),A(e,s),A(e,o)}function f(e,t,r,n,o){let a,s;a=96,void 0===r?s=d(t):"String"===r?(a|=8,s=d(t.valueOf())):(a|="ArrayBuffer"===r?16:24,s=new Uint8Array(t,n||0,o||t.byteLength));const i=y(s.length);A(e,Uint8Array.of(a|i.length-1)),A(e,i),A(e,s)}function c(e,t,n){if("stream"===e.method)throw r.collection;let a;if(a=128,"Array"===n){const r=y(t.length),n=U(t);if(void 0!==n.nslot){a=160;const s=n.nslot,i=y(s);A(e,Uint8Array.of(0|a|r.length-1<<2|i.length-1)),A(e,r),A(e,i);for(let r=0;r<s;r+=1)t.hasOwnProperty(r)?o(e,t[r]):A(e,Uint8Array.of(12))}else if(void 0!==n.nelement){a=160;const s=y(n.nelement);A(e,Uint8Array.of(16|a|r.length-1<<2|s.length-1)),A(e,r),A(e,s),t.forEach((function(t,r){o(e,r),o(e,t)}))}else{y(t.length);A(e,Uint8Array.of(a|r.length-1)),A(e,r),t.forEach((function(t){o(e,t)}))}}else if("Object"===n){const r=y(Object.keys(t).length);A(e,Uint8Array.of(8|a|r.length-1)),A(e,r);for(let r in t)t.hasOwnProperty(r)&&(o(e,r),o(e,t[r]))}else if("Map"===n){const r=y(t.size);A(e,Uint8Array.of(16|a|r.length-1)),A(e,r),t.forEach((function(t,r){o(e,r),o(e,t)}))}else{const r=y(t.size);A(e,Uint8Array.of(24|a|r.length-1)),A(e,r),t.forEach((function(t){o(e,t)}))}}function l(t,r,n){let o,a,s,i;if(o=192,"BE"===t.endian&&(o|=16),t.endian!==e&&r.BYTES_PER_ELEMENT>1){switch(a=r.buffer.slice(r.byteOffset,r.byteOffset+r.byteLength),r.BYTES_PER_ELEMENT){case 2:a=E(a);break;case 4:a=O(a);break;case 8:a=k(a)}s=0,i=a.byteLength}else a=r.buffer,s=r.byteOffset,i=r.byteLength;A(t,Uint8Array.of(o|["DataView","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array"].indexOf(n))),!1===t.record.has(a)?(t.record.set(a,t.length),f(t,a,a.constructor.name,s,i)):u(t,a)}function u(e,t){A(e,Uint8Array.of(29)),s(e,e.record.get(t))}function y(e){const t=[];for(;e>255;)t.push(255&e),e=Math.floor(e/256);return t.push(e),Uint8Array.from(t)}function h(e){const t=[],r=BigInt(8),n=BigInt(255);for(;e>n;)t.push(Number(e&n)),e>>=r;return t.push(Number(e)),Uint8Array.from(t)}function d(e){try{return(new TextEncoder).encode(e)}catch(t){let r=0;const n=[],o=e.length;for(;r<o;){let t=e.charCodeAt(r++);if(t<=127)n.push(t);else if(t<=2047)n.push(t>>6&31|192),n.push(63&t|128);else if(t<=55295||t>=57344&&t<=65535)n.push(t>>12&15|224),n.push(t>>6&63|128),n.push(63&t|128);else{const o=t,a=e.charCodeAt(r++);if(o<55296||o>56319)continue;if(a<56320||a>57343)continue;t=(1023&o)<<10|1023&a,t+=65536,n.push(t>>18&7|240),n.push(t>>12&63|128),n.push(t>>6&63|128),n.push(63&t|128)}}return Uint8Array.from(n)}}function b(e){if(e.version=e.bytes[e.cursor],void 0===e.version)throw r.ended;e.version>1&&console.warn("Trying to deserialize a newer version of the serialization scheme."),e.cursor++,e.offset++}function p(t){const n=t.bytes[t.cursor];if(void 0===n)throw r.ended;if(n<=13){let e;switch(t.cursor++,t.offset++,n){case 0:return null;case 1:return;case 2:return!0;case 3:e=new Boolean(!0);break;case 4:return!1;case 5:e=new Boolean(!1);break;case 6:return 1/0;case 7:e=new Number(1/0);break;case 8:return-1/0;case 9:e=new Number(-1/0);break;case 10:return NaN;case 11:e=new Number(NaN);break;case 12:return r.hole;case 13:return new ReferenceError}return t.map.set(t.offset-1,e),e}if(n<=31)switch(n){case 14:return function(e){const t=e.offset;e.cursor++,e.offset++;try{if(!1===function(e){const t=e.bytes[e.cursor];if(void 0===t)throw r.ended;return t>>5==1&&0==(t>>4&1)||10===t}(e))throw r.malformed;const n=new Date(p(e));return e.map.set(t,n),n}catch(t){throw t===r.ended?(e.cursor--,e.offset--,t):t}}(t);case 15:return function(e){const t=e.offset;e.cursor++,e.offset++;try{if(!1===j(e))throw r.malformed;const n=p(e),o=n.lastIndexOf("/");if("/"!==n[0]||o<=0)throw r.malformed;const a=new RegExp(n.slice(1,o),n.slice(o+1));return e.map.set(t,a),a}catch(t){throw t===r.ended?(e.cursor--,e.offset--,t):t}}(t);case 29:return function(e){e.cursor++,e.offset++;try{if(!1===S(e))throw r.malformed;const t=p(e);if(!1===e.map.has(t))throw r.malformed;return e.map.get(t)}catch(t){throw t===r.ended?(e.cursor--,e.offset--,t):t}}(t);default:throw r.malformed}else switch(n>>5){case 1:return function(e){let t,n=e.cursor;const o=e.bytes[n++],a=1+(7&o);if(n+a>e.bytes.length)throw r.ended;if(a<8){if(7===a&&e.bytes[n+6]>31)throw r.malformed;t=w(e.bytes.subarray(n,n+=a)),1==(o>>3&1)&&(t*=-1)}else{const r=e.bytes.subarray(n,n+=a);t=new DataView(r.buffer,r.byteOffset,r.length).getFloat64(0,!0)}1==(o>>4&1)&&(t=new Number(t),e.map.set(e.offset,t));return e.cursor+=a+1,e.offset+=a+1,t}(t);case 2:return function(e){let t,n=e.cursor;const o=e.bytes[n++],a=1+(7&o);if(n+a>e.bytes.length)throw r.ended;const s=w(e.bytes.subarray(n,n+=a));if(n+s>e.bytes.length)throw r.ended;t=function(e){const t=BigInt(0),r=BigInt(8);let n=t,o=t;return e.forEach((function(e){n+=BigInt(e)<<o,o+=r})),n}(e.bytes.subarray(n,n+=s)),1==(o>>3&1)&&(t*=BigInt(-1));1==(o>>4&1)&&(t=new Object(t),e.map.set(e.offset,t));return e.cursor+=a+s+1,e.offset+=a+s+1,t}(t);case 3:return function(e){let t,n=e.cursor;const o=e.bytes[n++],a=1+(7&o);if(n+a>e.bytes.length)throw r.ended;const s=w(e.bytes.subarray(n,n+=a));if(n+s>e.bytes.length)throw r.ended;switch(o>>3&3){case 0:t=m(e.bytes,n,n+=s);break;case 1:t=new String(m(e.bytes,n,n+=s)),e.map.set(e.offset,t);break;case 2:t=new ArrayBuffer(s),e.map.set(e.offset,t),new Uint8Array(t).set(e.bytes.subarray(n,n+=s));break;case 3:t=new SharedArrayBuffer(s),e.map.set(e.offset,t),new Uint8Array(t).set(e.bytes.subarray(n,n+=s))}return e.cursor+=a+s+1,e.offset+=a+s+1,t}(t);case 4:return function(e){if("stream"===e.method)throw r.collection;let t,n=e.cursor;const o=e.bytes[n++],a=e.bytes.length,s=1+(7&o);if(n+s>a)throw r.ended;const i=w(e.bytes.subarray(n,n+=s));switch(o>>3&3){case 0:t=[],e.map.set(e.offset,t),e.cursor+=s+1,e.offset+=s+1;for(let r=0;r<i;r+=1)t.push(p(e));return t;case 1:t={},e.map.set(e.offset,t),e.cursor+=s+1,e.offset+=s+1;for(let n=0;n<i;n+=1){if(!1===j(e))throw r.malformed;t[p(e)]=p(e)}return t;case 2:t=new Map,e.map.set(e.offset,t),e.cursor+=s+1,e.offset+=s+1;for(let r=0;r<i;r+=1)t.set(p(e),p(e));return t;case 3:t=new Set,e.map.set(e.offset,t),e.cursor+=s+1,e.offset+=s+1;for(let r=0;r<i;r+=1)t.add(p(e));return t}}(t);case 5:return function(e){if("stream"===e.method)throw r.collection;let t=e.cursor;const n=e.bytes[t++],o=e.bytes.length,a=1+(n>>2&3);if(t+a>o)throw r.ended;const s=w(e.bytes.subarray(t,t+=a)),i=new Array(s),f=1+(3&n);if(t+f>o)throw r.ended;const c=w(e.bytes.subarray(t,t+=f));if(e.map.set(e.offset,i),e.cursor+=a+f+1,e.offset+=a+f+1,0==(n>>4&1)){for(let t=0;t<c;t+=1){const n=p(e);n!==r.hole&&(i[t]=n)}return i}for(let t=0;t<c;t+=1){if(!1===S(e))throw r.malformed;i[p(e)]=p(e)}return i}(t);case 6:return function(t){const n=t.offset,o=t.bytes[t.cursor],a=e!==(o>>4&1?"BE":"LE"),s=15&o;t.cursor++,t.offset++;try{let e;if(!1===function(e){const t=e.bytes[e.cursor];if(void 0===t)throw r.ended;return t>>5==3&&(t>>3&3)>=2}(t))throw r.malformed;const o=p(t);switch(s){case 0:e=new DataView(o);break;case 1:e=new Int8Array(o);break;case 2:e=new Uint8Array(o);break;case 3:e=new Uint8ClampedArray(o);break;case 4:e=a?new Int16Array(E(o.slice())):new Int16Array(o);break;case 5:e=a?new Uint16Array(E(o.slice())):new Uint16Array(o);break;case 6:e=a?new Int32Array(O(o.slice())):new Int32Array(o);break;case 7:e=a?new Uint32Array(O(o.slice())):new Uint32Array(o);break;case 8:e=a?new Float32Array(O(o.slice())):new Float32Array(o);break;case 9:e=a?new Float64Array(k(o.slice())):new Float64Array(o);break;case 10:e=a?new BigInt64Array(k(o.slice())):new BigInt64Array(o);break;case 11:e=a?new BigUint64Array(k(o.slice())):new BigUint64Array(o);break;default:throw r.malformed}return t.map.set(n,e),e}catch(e){throw e===r.ended?(t.cursor--,t.offset--,e):e}}(t);case 7:throw r.malformed}}function w(e){let t=0,r=0;return e.forEach((function(e){t+=e*Math.pow(2,r),r+=8})),t}function m(e,t,r){try{return new TextDecoder("utf-8").decode(e.subarray(t,r))}catch(n){let o=t,a="";for(;o<r;){let t;if(0===e[o])break;if(0==(128&e[o]))a+=String.fromCharCode(e[o++]);else if(192==(224&e[o])&&o+1<r)t=(31&e[o++])<<6|63&e[o++],a+=String.fromCharCode(t);else if(224==(240&e[o])&&o+2<r)t=(15&e[o++])<<12|(63&e[o++])<<6|63&e[o++],a+=String.fromCharCode(t);else{if(!(240==(248&e[o])&&o+3<r))break;if(t=(7&e[o++])<<18|(63&e[o++])<<12|(63&e[o++])<<6|63&e[o++],t>65535){t-=65536;const e=t>>>10&1023|55296,r=1023&t|56320;a+=String.fromCharCode(e,r)}else a+=String.fromCharCode(t)}}return a}}function g(e){const t={},n=[{}],o=Symbol(),a=Symbol(),s=Symbol(),i=Symbol(),f=Symbol(),c=Symbol();return{start:function(e){t.map=new Map,t.bytes=new Uint8Array(0),t.cursor=0,t.offset=0,t.length=0,t.method="stream",Object.defineProperty(n[0],a,{configurable:!0,value:1}),Object.defineProperty(n[0],o,{configurable:!0,writable:!0,value:0}),Object.defineProperty(n[0],s,{configurable:!0,writable:!0,value:"root"})},close:function(e){if(t.bytes.length>0){if(void 0===e)throw r.unused;e.error(r.unused)}else{const e=n[0].root;if(delete n[0].root,void 0===this.stream)return e;this.stream.result=e,delete this.stream}},write:function(y,h){let d;if((t.length+=y.length)<=e){t.bytes=v([t.bytes,y]);const e=t.bytes.length;let h=n.length-1;for(void 0===t.version&&b(t);h>=0;){const y=n[h],b=u(y);if(b===r.property)try{if(t.cursor+1>e)break;let a=p(t);if(a!==r.hole){if(l(y,a),0===h)break;n.pop(),n[h-1][s]===f&&(n[h-1][s]=a)}else{if("A"!==y[i])throw r.malformed;y[o]++,n.pop()}}catch(n){if(n!==r.collection){n!==r.ended&&(d=n);break}{let r=t.cursor;const n=t.bytes[r++];if(n>>5==4){let i;const f=1+(7&n);if(r+f>e)break;const c=w(t.bytes.subarray(r,r+=f));switch(n>>3&3){case 0:i=[];break;case 1:i={};break;case 2:i=new Map;break;case 3:i=new Set}Object.defineProperty(i,a,{configurable:!0,value:c}),Object.defineProperty(i,o,{configurable:!0,writable:!0,value:0}),Object.defineProperty(i,s,{configurable:!0,writable:!0,value:void 0}),l(y,i),t.map.set(t.offset,i),t.cursor+=f+1,t.offset+=f+1}else if(n>>5==5){const f=1+(n>>2&3);if(r+f>e)break;const c=w(t.bytes.subarray(r,r+=f)),u=new Array(c),h=1+(3&n);if(r+h>e)break;const d=w(t.bytes.subarray(r,r+=h));Object.defineProperty(u,a,{configurable:!0,value:d}),Object.defineProperty(u,o,{configurable:!0,writable:!0,value:0}),Object.defineProperty(u,s,{configurable:!0,writable:!0,value:void 0}),Object.defineProperty(u,i,{configurable:!0,value:0==(n>>4&1)?"A":"B"}),l(y,u),t.map.set(t.offset,u),t.cursor+=f+h+1,t.offset+=f+h+1}}}else if(b[o]<b[a]){const e=b.constructor.name;if("Array"===e)if("B"!==b[i])b[s]=b[o],n.push(b);else try{if(!1===S(t))throw r.malformed;b[s]=p(t),n.push(b)}catch(e){e!==r.ended&&(d=e);break}else if("Object"===e)try{if(!1===j(t))throw r.malformed;b[s]=p(t),n.push(b)}catch(e){e!==r.ended&&(d=e);break}else if("Map"===e){b[s]=f,n.push(b);const e={};Object.defineProperty(e,a,{configurable:!0,value:1}),Object.defineProperty(e,o,{configurable:!0,writable:!0,value:0}),Object.defineProperty(e,s,{configurable:!0,writable:!1,value:"root"}),n.push(e)}else"Set"===e&&(b[s]=c,n.push(b))}else{if(delete b[i],delete b[s],delete b[o],delete b[a],0===h)break;n.pop(),n[h-1][s]===f&&(n[h-1][s]=b)}h=n.length-1}void 0===d&&(t.bytes=t.bytes.slice(t.cursor),t.cursor=0)}else d=r.exceeded;if(void 0!==d){if(void 0===h)throw d;h.error(d)}}};function l(e,t){const r=e.constructor.name;"Array"===r?e.hasOwnProperty(i)?(e[e[s]]=t,e[o]++):(e.push(t),e[o]++):"Object"===r?(e[e[s]]=t,e[o]++):"Map"===r?(e.set(e[s],t),e[o]++):"Set"===r&&(e.add(t),e[s]=t,e[o]++)}function u(e){const t=e[s],n=e.constructor.name;return"Array"===n||"Object"===n?e.hasOwnProperty(t)?e[t]:r.property:"Map"===n?e.has(t)?e.get(t):r.property:"Set"===n?e.has(t)?t:r.property:void 0}}function A(e,t){e.bytes.push(t),e.length+=t.length}function v(e,t){let r=0,n=0;void 0===t?e.forEach((function(e){r+=e.length})):r=t;const o=new Uint8Array(r);return e.forEach((function(e){o.set(e,n),n+=e.length})),o}function U(e){let t=0,r=0,n=0,o=0,a=-1;e.forEach((function(e,s){a=s,s<=65535?s<=255?t++:r++:s<=1677215?n++:o++})),a+=1;const s=t+r+n+o;if(s===e.length)return{};return a-s<=2*t+3*r+4*n+5*o?{nslot:a}:{nelement:s}}function E(e){const t=new Uint8Array(e);for(let e=0,r=t.length;e<r;e+=2){const r=t[e];t[e]=t[e+1],t[e+1]=r}return e}function O(e){const t=new Uint8Array(e);for(let e=0,r=t.length;e<r;e+=4)for(let r=0;r<2;r+=1){const n=t[e+r];t[e+r]=t[e+3-r],t[e+3-r]=n}return e}function k(e){const t=new Uint8Array(e);for(let e=0,r=t.length;e<r;e+=8)for(let r=0;r<4;r+=1){const n=t[e+r];t[e+r]=t[e+7-r],t[e+7-r]=n}return e}function S(e){const t=e.bytes[e.cursor];if(void 0===t)throw r.ended;return t>>5==1&&0==(t>>4&1)&&0==(t>>3&1)}function j(e){const t=e.bytes[e.cursor];if(void 0===t)throw r.ended;return t>>5==3&&0==(t>>3&3)}}();